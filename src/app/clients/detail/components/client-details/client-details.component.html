<ion-card *ngIf="client" style="--background: #fff">
  <ion-card-header padding>
    <ion-card-title>
      <ion-row>
        <ion-col size="auto">
          <ion-icon style="font-size: 64px" color="primary" [src]="getIcon(client)"></ion-icon>
        </ion-col>
        <ion-col color="tertiary" align-items-center>
          <ion-row>
            <ion-col>
              <b>{{ client?.lname }}</b>
              {{ client?.fname }}
            </ion-col>

            <ion-col size="auto">
              <ion-col size="auto">
                <ion-fab vertical="center" horizontal="center">
                  <ion-fab-button size="small" translucent="true" color="light">
                    <ion-icon name="more"></ion-icon>
                  </ion-fab-button>
                  <ion-fab-list side="bottom">
                    <ion-fab-button>
                      <ion-icon name="color-wand"></ion-icon>
                    </ion-fab-button>
                    <ion-fab-button>
                      <ion-icon name="trash"></ion-icon>
                    </ion-fab-button>
                  </ion-fab-list>
                </ion-fab>
              </ion-col>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-card-title>
  </ion-card-header>
  <ion-card-content>
    <hr />
    <ion-grid>
      <ion-row>
        <ion-col size="12">
          <h1>
            <ion-text color="secondary">{{ 'phones' | translate }}</ion-text>
          </h1>
          <ion-item lines="none" *ngFor="let phone of client.phones" text-left class="ps-0">
            <section fxFlex fxLayoutAlign="start center" fxLayoutGap="15px">
              <ion-text color="dark">{{ phone.number }}</ion-text>
              <ion-button (click)="onCall(phone.number)" fill="outline">
                <ion-icon src="/assets/icon/018-phone-contact.svg"></ion-icon>
                &nbsp;
                {{ 'clients.details.labels.call' | translate }}
              </ion-button>
            </section>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" class="ps-0">
          <h1 fxLayout="row center">
            <ion-text color="secondary">{{ 'clients.details.labels.notes' | translate }}</ion-text>
            <ion-button size="small" fill="clear" *ngIf="displayNotesCheckbox" (click)="toggleNotes()">
              <small>
                {{ 'clients.details.labels.hideNotes' | translate }}
              </small>
            </ion-button>
          </h1>
          <ion-item lines="none" style="--min-height: 50px"  class="ps-0">
            <section fxLayout="column" fxLayoutAlign="start start">
                <ion-button size="small" fill="clear" size="small" *ngIf="!displayNotesCheckbox" (click)="toggleNotes()">
                  {{ 'clients.details.labels.showNotes' | translate }}
                </ion-button>
              <ion-text *ngIf="displayNotesCheckbox" class="text-left" no-padding>
                <span [innerHTML]="(client.clientNotes.length > 3 ? client.clientNotes : 'no notes')  | nl2br"></span>
              </ion-text>
            </section>
          </ion-item>
        </ion-col>
      </ion-row>
    </ion-grid>
    <app-client-events (addClientEvent)="addClientEvent($event)"></app-client-events>

    <ion-list>
      <ng-container *ngFor="let ce of clientEvents; trackBy: trackEventsBy">
        <ion-item button detail detailIcon="arrow-down" (click)="setExpanded(ce._id)">
          <ion-label text-wrap>
            <ion-text>{{ ce.eventDate }} - {{ ce.price.amount / 100 }} {{ ce.price.currency }}</ion-text>
          </ion-label>
        </ion-item>
        <ion-item *ngIf="ce._id === expandedRow">
          <section fxLayout="column">

            <span [innerHTML]="ce.eventNotes | nl2br"></span>
          </section>
        </ion-item>
      </ng-container>
    </ion-list>
  </ion-card-content>
</ion-card>

<pre style="max-width: 0px">
        {{ client | json }}
      </pre
>
